"use strict";(self.webpackChunkClient_App=self.webpackChunkClient_App||[]).push([[394],{3394:(he,k,d)=>{d.r(k),d.d(k,{AccountModule:()=>ge});var g=d(177),m=d(6622);function E(i,a,t,r,s,o,l){try{var c=i[o](l),u=c.value}catch(p){return void t(p)}c.done?a(u):Promise.resolve(u).then(r,s)}function F(i){return function(){var a=this,t=arguments;return new Promise(function(r,s){var o=i.apply(a,t);function l(u){E(o,r,s,l,c,"next",u)}function c(u){E(o,r,s,l,c,"throw",u)}l(void 0)})}}var e=d(2598),n=d(4341),h=d(6697);class y{constructor(a,t,r){this.accessToken=a,this.userId=t,this.provider=r}}var w=d(8866),f=d(978),v=d(4739),_=d(4293);const x=["googleButton"];function T(i,a){if(1&i){const t=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){e.eBV(t);const s=e.XpG(2);return e.Njj(s.resendEmailConfirmationLink())}),e.k0s()}}function G(i,a){if(1&i&&(e.j41(0,"div",22),e.nrm(1,"app-validation-messages",23),e.DNE(2,T,1,0,"a",24),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("errorMessages",t.errorMessages),e.R7$(1),e.Y8G("ngIf",t.errorMessages[0].includes("please confirm your email."))}}let U=(()=>{class i{constructor(t,r,s,o,l,c,u){this.accountService=t,this.formBuilder=r,this.sharedService=s,this.router=o,this.activatedRoute=l,this._renderer2=c,this._document=u,this.googleButton=new e.aKT({}),this.logInForm=new n.gE({}),this.submitted=!1,this.errorMessages=[],this.returnUrl=null,this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:p=>{p?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe(b=>{b&&(this.returnUrl=b.get("returnUrl"))})}})}ngOnInit(){this.initializeGoogleButton(),this.initializeForm()}ngAfterViewInit(){const t=this._renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this._renderer2.appendChild(this._document.body,t)}login(){this.submitted=!0,this.errorMessages=[],!this.logInForm.invalid&&this.accountService.login(this.logInForm.value).subscribe({next:()=>{this.returnUrl?this.router.navigateByUrl(this.returnUrl):(this.sharedService.showNotification(!0,"login successful","welcome"),this.router.navigateByUrl("/"))},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error),console.log(t)}})}loginWithFacebook(){var t=this;FB.login(function(){var r=F(function*(s){if(s.authResponse){const o=s.authResponse.accessToken,l=s.authResponse.userID;console.log(s),t.accountService.loginWithThirdParty(new y(o,l,"facebook")).subscribe({next:c=>{t.router.navigateByUrl(t.returnUrl?t.returnUrl:"/")},error:c=>{t.sharedService.showNotification(!1,"Failed",c.error)}})}else t.sharedService.showNotification(!1,"Failed","Unable to login with your facebook")});return function(s){return r.apply(this,arguments)}}())}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}initializeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"386270772245-t751i9ej97f3m95f3t5139k8ampefi1n.apps.googleusercontent.com",callback:this.googleCallback.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signin_with",logo_alignment:"center"})}}googleCallback(t){var r=this;return F(function*(){const s=(0,w.s)(t.credential);r.accountService.loginWithThirdParty(new y(t.credential,s.sub,"google")).subscribe({next:o=>{r.router.navigateByUrl(r.returnUrl?r.returnUrl:"/")},error:o=>{r.sharedService.showNotification(!1,"Failed",o.error)}})})()}initializeForm(){this.logInForm=this.formBuilder.group({username:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(6)]]})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.D),e.rXU(n.ok),e.rXU(v.d),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(e.sFG),e.rXU(g.qQ))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],viewQuery:function(r,s){if(1&r&&e.GBs(x,7),2&r){let o;e.mGM(o=e.lsd())&&(s.googleButton=o.first)}},decls:35,vars:2,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"form-floating","mb-3"],["formControlName","username","type","text","placeholder","Username",1,"form-control"],["for","email"],["formControlName","password","type","password","placeholder","Username",1,"form-control"],["for","password"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],["class","form-floating",4,"ngIf"],[1,"mt-4","text-center"],["routerLink","/account/send-email/forgot-username-or-password",1,"btn","btn-link"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"form-floating"],[3,"errorMessages"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-link",3,"click"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"main",2)(3,"form",3),e.bIt("ngSubmit",function(){return s.login()}),e.j41(4,"div",4)(5,"h3",5),e.EFF(6,"Login"),e.k0s()(),e.j41(7,"div",6),e.nrm(8,"input",7),e.j41(9,"label",8),e.EFF(10,"Email"),e.k0s()(),e.j41(11,"div",6),e.nrm(12,"input",9),e.j41(13,"label",10),e.EFF(14,"Password"),e.k0s()(),e.j41(15,"div",11)(16,"button",12),e.EFF(17,"Login"),e.k0s()(),e.DNE(18,G,3,2,"div",13),e.j41(19,"div",14)(20,"a",15)(21,"h6"),e.EFF(22,"Forgot username or password"),e.k0s()()(),e.j41(23,"div",16)(24,"div",17),e.nrm(25,"hr"),e.k0s(),e.j41(26,"div",18),e.EFF(27,"Or login using"),e.k0s(),e.j41(28,"div",17),e.nrm(29,"hr"),e.k0s()(),e.j41(30,"div",19),e.nrm(31,"div",null,20),e.j41(33,"button",21),e.bIt("click",function(){return s.loginWithFacebook()}),e.EFF(34,"Facebook"),e.k0s()()()()()()),2&r&&(e.R7$(3),e.Y8G("formGroup",s.logInForm),e.R7$(15),e.Y8G("ngIf",s.errorMessages.length>0))},dependencies:[g.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,m.Wk,_.J]})}}return i})();const B=["googleButton"];function S(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," email should be correct! "),e.k0s())}function M(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," first name required! "),e.k0s())}function $(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," first name should be of 3 characters atleast "),e.k0s())}function X(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," last name required! "),e.k0s())}function P(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," last name should be of 3 character atleast "),e.k0s())}function D(i,a){1&i&&(e.j41(0,"span",6),e.EFF(1," password should be minimum 6 characters! "),e.k0s())}function L(i,a){if(1&i&&(e.j41(0,"div",26),e.nrm(1,"app-validation-messages",27),e.k0s()),2&i){const t=e.XpG();e.R7$(1),e.Y8G("errorMessages",t.errorMessages)}}let Y=(()=>{class i{constructor(t,r,s,o,l,c){this.accountService=t,this.formBuilder=r,this.sharedService=s,this.router=o,this._renderer2=l,this._document=c,this.googleButton=new e.aKT({}),this.registerForm=new n.gE({}),this.submitted=!1,this.errorMessages=[],this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:u=>{u&&this.router.navigateByUrl("/")}})}ngOnInit(){this.initializeGoogleButton(),this.initializeForm()}ngAfterViewInit(){const t=this._renderer2.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async="true",t.defer="true",this._renderer2.appendChild(this._document.body,t)}register(){this.submitted=!0,this.errorMessages=[],!this.registerForm.invalid&&this.accountService.register(this.registerForm.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login"),console.log(t)},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error),console.log(t)}})}registerWithFacebook(){var t=this;FB.login(function(){var r=F(function*(s){s.authResponse?t.router.navigateByUrl(`/account/third-party/facebook?access_token=${s.authResponse.accessToken}&userId=${s.authResponse.userID}`):t.sharedService.showNotification(!1,"Failed","Unable to register with your facebook")});return function(s){return r.apply(this,arguments)}}())}initializeForm(){this.registerForm=this.formBuilder.group({firstName:["",[n.k0.required,n.k0.minLength(3),n.k0.maxLength(15)]],lastName:["",[n.k0.required,n.k0.minLength(3),n.k0.maxLength(15)]],email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(6)]]})}initializeGoogleButton(){window.onGoogleLibraryLoad=()=>{google.accounts.id.initialize({client_id:"386270772245-t751i9ej97f3m95f3t5139k8ampefi1n.apps.googleusercontent.com",callback:this.googleCallback.bind(this),auto_select:!1,cancel_on_tap_outside:!0}),google.accounts.id.renderButton(this.googleButton.nativeElement,{size:"medium",shape:"rectangular",text:"signup_with",logo_alignment:"center"})}}googleCallback(t){var r=this;return F(function*(){const s=(0,w.s)(t.credential);r.router.navigateByUrl(`/account/third-party/google?access_token=${t.credential}&userId=${s.sub}`)})()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.D),e.rXU(n.ok),e.rXU(v.d),e.rXU(m.Ix),e.rXU(e.sFG),e.rXU(g.qQ))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-register"]],viewQuery:function(r,s){if(1&r&&e.GBs(B,7),2&r){let o;e.mGM(o=e.lsd())&&(s.googleButton=o.first)}},decls:47,vars:16,consts:[[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"text-danger"],[1,"form-floating","mb-3"],["formControlName","email","type","text","placeholder","Username",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["formControlName","firstName","type","text","placeholder","First Name",1,"form-control"],["for","firstName"],["formControlName","lastName","type","text","placeholder","Last Name",1,"form-control"],["for","lastName"],["formControlName","password","type","password","placeholder","Password",1,"form-control"],["for","password"],["class","form-floating",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"row","d-flex","justify-content-center","mt-3"],[1,"col-4"],[1,"col-4","text-center"],[1,"d-flex","justify-content-between","my-3"],["googleButton",""],[1,"btn","btn-primary","btn-sm",2,"width","180px",3,"click"],[1,"form-floating"],[3,"errorMessages"]],template:function(r,s){if(1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"main",2)(3,"form",3),e.bIt("ngSubmit",function(){return s.register()}),e.j41(4,"div",4)(5,"h3",5),e.EFF(6,"Let's get started to play"),e.k0s(),e.j41(7,"span",6),e.EFF(8,"Play"),e.k0s()(),e.j41(9,"div",7),e.nrm(10,"input",8),e.j41(11,"label",9),e.EFF(12,"Email"),e.k0s(),e.DNE(13,S,2,0,"span",10),e.k0s(),e.j41(14,"div",7),e.nrm(15,"input",11),e.j41(16,"label",12),e.EFF(17,"First Name"),e.k0s(),e.DNE(18,M,2,0,"span",10),e.DNE(19,$,2,0,"span",10),e.k0s(),e.j41(20,"div",7),e.nrm(21,"input",13),e.j41(22,"label",14),e.EFF(23,"Last Name"),e.k0s(),e.DNE(24,X,2,0,"span",10),e.DNE(25,P,2,0,"span",10),e.k0s(),e.j41(26,"div",7),e.nrm(27,"input",15),e.j41(28,"label",16),e.EFF(29,"Password"),e.k0s(),e.DNE(30,D,2,0,"span",10),e.k0s(),e.DNE(31,L,2,1,"div",17),e.j41(32,"div",18)(33,"button",19),e.EFF(34,"Create Account"),e.k0s()(),e.j41(35,"div",20)(36,"div",21),e.nrm(37,"hr"),e.k0s(),e.j41(38,"div",22),e.EFF(39,"Or sign up using"),e.k0s(),e.j41(40,"div",21),e.nrm(41,"hr"),e.k0s()(),e.j41(42,"div",23),e.nrm(43,"div",null,24),e.j41(45,"button",25),e.bIt("click",function(){return s.registerWithFacebook()}),e.EFF(46,"Facebook"),e.k0s()()()()()()),2&r){let o,l,c,u,p,b,C,N,R,I;e.R7$(3),e.Y8G("formGroup",s.registerForm),e.R7$(7),e.AVh("is-invalid",s.submitted&&(null==(o=s.registerForm.get("email"))?null:o.errors)),e.R7$(3),e.Y8G("ngIf",s.submitted&&(null==(l=s.registerForm.get("email"))?null:l.hasError("email"))),e.R7$(2),e.AVh("is-invalid",s.submitted&&(null==(c=s.registerForm.get("firstName"))?null:c.errors)),e.R7$(3),e.Y8G("ngIf",s.submitted&&(null==(u=s.registerForm.get("firstName"))?null:u.hasError("required"))),e.R7$(1),e.Y8G("ngIf",s.submitted&&(null==(p=s.registerForm.get("firstName"))?null:p.hasError("minlength"))),e.R7$(2),e.AVh("is-invalid",s.submitted&&(null==(b=s.registerForm.get("lastName"))?null:b.errors)),e.R7$(3),e.Y8G("ngIf",s.submitted&&(null==(C=s.registerForm.get("lastName"))?null:C.hasError("required"))),e.R7$(1),e.Y8G("ngIf",s.submitted&&(null==(N=s.registerForm.get("lastName"))?null:N.hasError("minlength"))),e.R7$(2),e.AVh("is-invalid",s.submitted&&(null==(R=s.registerForm.get("password"))?null:R.errors)),e.R7$(3),e.Y8G("ngIf",s.submitted&&(null==(I=s.registerForm.get("password"))?null:I.hasError("minlength"))),e.R7$(1),e.Y8G("ngIf",s.errorMessages.length>0)}},dependencies:[g.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,_.J]})}}return i})();function V(i,a){1&i&&(e.j41(0,"div",1)(1,"a",2),e.EFF(2,"Login"),e.k0s()())}function W(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"a",3),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.resendEmailConfirmationLink())}),e.EFF(2," click here to resend email confirmation link "),e.k0s()()}}let q=(()=>{class i{constructor(t,r,s,o){this.accountService=t,this.sharedService=r,this.router=s,this.activatedRoute=o,this.success=!0}ngOnInit(){this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe(r=>{if(r){const s={token:r.get("token"),email:r.get("email")};this.accountService.confirmEmail(s).subscribe({next:o=>{this.success=!0,this.sharedService.showNotification(!0,o.value.title,o.value.message)},error:o=>{this.success=!1,this.sharedService.showNotification(!1,"Failed",o.error)}})}})}})}resendEmailConfirmationLink(){this.router.navigateByUrl("/account/send-email/resend-email-confirmation-link")}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.D),e.rXU(v.d),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-confirm-email"]],decls:2,vars:2,consts:[["class","container text-center",4,"ngIf"],[1,"container","text-center"],["routerLink","/account/login",1,"btn","btn-primary"],[1,"btn","btn-link",3,"click"]],template:function(r,s){1&r&&(e.DNE(0,V,3,0,"div",0),e.DNE(1,W,3,0,"div",0)),2&r&&(e.Y8G("ngIf",s.success),e.R7$(1),e.Y8G("ngIf",!s.success))},dependencies:[g.bT,m.Wk]})}}return i})();function z(i,a){1&i&&(e.j41(0,"span"),e.EFF(1," Resend email confirmation "),e.k0s())}function A(i,a){1&i&&(e.j41(0,"span"),e.EFF(1," Retrive your username or password "),e.k0s())}function J(i,a){1&i&&(e.j41(0,"span",18),e.EFF(1," Email is required "),e.k0s())}function O(i,a){1&i&&(e.j41(0,"span",18),e.EFF(1," Invalid email address "),e.k0s())}function Q(i,a){if(1&i&&(e.j41(0,"div",19),e.nrm(1,"app-validation-messages",20),e.k0s()),2&i){const t=e.XpG(2);e.R7$(1),e.Y8G("errorMessages",t.errorMessages)}}function K(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.sendEmail())}),e.j41(4,"div",5)(5,"h1",6),e.DNE(6,z,2,0,"span",7),e.DNE(7,A,2,0,"span",7),e.k0s()(),e.j41(8,"div",8),e.nrm(9,"input",9),e.j41(10,"label",10),e.EFF(11,"Email"),e.k0s(),e.DNE(12,J,2,0,"span",11),e.DNE(13,O,2,0,"span",11),e.k0s(),e.DNE(14,Q,2,1,"div",12),e.j41(15,"div",13)(16,"div",14)(17,"div",15)(18,"button",16),e.EFF(19,"Send"),e.k0s()()(),e.j41(20,"div",14)(21,"div",15)(22,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.cancel())}),e.EFF(23,"Cancel"),e.k0s()()()()()()()()}if(2&i){const t=e.XpG();let r,s,o;e.R7$(3),e.Y8G("formGroup",t.emailForm),e.R7$(3),e.Y8G("ngIf",t.mode.includes("resend-email-confirmation-link")),e.R7$(1),e.Y8G("ngIf",t.mode.includes("forgot-username-or-password")),e.R7$(2),e.AVh("is-invalid",t.submitted&&(null==(r=t.emailForm.get("email"))?null:r.errors)),e.R7$(3),e.Y8G("ngIf",t.submitted&&(null==(s=t.emailForm.get("email"))?null:s.hasError("required"))),e.R7$(1),e.Y8G("ngIf",t.submitted&&(null==(o=t.emailForm.get("email"))?null:o.hasError("pattern"))),e.R7$(1),e.Y8G("ngIf",t.errorMessages.length>0)}}let H=(()=>{class i{constructor(t,r,s,o,l){this.sharedService=t,this.formBuilder=r,this.accountService=s,this.router=o,this.activatedRoute=l,this.emailForm=new n.gE({}),this.submitted=!1,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:t=>{if(t)this.router.navigateByUrl("/");else{const r=this.activatedRoute.snapshot.paramMap.get("mode");r&&(this.mode=r,this.initializeForm())}}})}initializeForm(){this.emailForm=this.formBuilder.group({email:["",[n.k0.required,n.k0.email]]})}sendEmail(){this.submitted=!0,this.errorMessages=[],this.emailForm.valid&&(this.mode?.includes("resend-email-confirmation-link")?this.accountService.resendEmailConfirmationLink(this.emailForm.get("email")?.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}}):this.mode?.includes("forgot-username-or-password")&&this.accountService.forgotUsernameOrPassword(this.emailForm.get("email")?.value).subscribe({next:t=>{this.sharedService.showNotification(!0,t.value.title,t.value.message),this.router.navigateByUrl("/account/login")},error:t=>{t.error.errors?this.errorMessages=t.error.errors:this.errorMessages.push(t.error)}}))}cancel(){this.router.navigateByUrl("/account/login")}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(v.d),e.rXU(n.ok),e.rXU(f.D),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-send-email"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[4,"ngIf"],[1,"from-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],["for","email"],["class","text-danger",4,"ngIf"],["class","form-floating",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","submit",1,"btn","btn-block","btn-danger",3,"click"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(r,s){1&r&&e.DNE(0,K,24,8,"div",0),2&r&&e.Y8G("ngIf",s.mode)},dependencies:[g.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,_.J]})}}return i})();function Z(i,a){1&i&&(e.j41(0,"span",19),e.EFF(1," password should be minimum 6 characters! "),e.k0s())}function ee(i,a){if(1&i&&(e.j41(0,"div",20),e.nrm(1,"app-validation-messages",21),e.k0s()),2&i){const t=e.XpG(2);e.R7$(1),e.Y8G("errorMessages",t.errorMessages)}}function te(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.resetPassword())}),e.j41(4,"div",5)(5,"h1",6),e.EFF(6," Change your password "),e.k0s()(),e.j41(7,"div",7),e.nrm(8,"input",8),e.k0s(),e.j41(9,"div",9),e.nrm(10,"input",10),e.j41(11,"label",11),e.EFF(12,"New Password"),e.k0s(),e.DNE(13,Z,2,0,"span",12),e.k0s(),e.DNE(14,ee,2,1,"div",13),e.j41(15,"div",14)(16,"div",15)(17,"div",16)(18,"button",17),e.EFF(19,"Change Password"),e.k0s()()(),e.j41(20,"div",15)(21,"div",16)(22,"button",18),e.EFF(23,"Cancel"),e.k0s()()()()()()()()}if(2&i){const t=e.XpG();let r,s;e.R7$(3),e.Y8G("formGroup",t.resetPasswordForm),e.R7$(7),e.AVh("is-invalid",t.submitted&&(null==(r=t.resetPasswordForm.get("newPassword"))?null:r.errors)),e.R7$(3),e.Y8G("ngIf",t.submitted&&(null==(s=t.resetPasswordForm.get("newPassword"))?null:s.hasError("minlength"))),e.R7$(1),e.Y8G("ngIf",t.errorMessages.length>0)}}let re=(()=>{class i{constructor(t,r,s,o,l){this.sharedService=t,this.formBuilder=r,this.accountService=s,this.router=o,this.activatedRoute=l,this.resetPasswordForm=new n.gE({}),this.token=null,this.email=null,this.submitted=!1,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe(r=>{this.token=r.get("token"),this.email=r.get("email"),this.token&&this.email?this.initializeForm(this.email):this.router.navigateByUrl("/")})}})}initializeForm(t){this.resetPasswordForm=this.formBuilder.group({email:[{value:t,disabled:!0}],newPassword:["",[n.k0.required,n.k0.minLength(6)]]})}resetPassword(){if(this.submitted=!0,this.errorMessages=[],this.resetPasswordForm.valid&&this.email&&this.token){const t={token:this.token,email:this.email,newPassword:this.resetPasswordForm.get("newPassword")?.value};this.accountService.resetPassword(t).subscribe({next:r=>{this.sharedService.showNotification(!0,r.value.title,r.value.message),this.router.navigateByUrl("/account/login")},error:r=>{r.error.errors?this.errorMessages=r.error.errors:this.errorMessages.push(r.error)}})}}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(v.d),e.rXU(n.ok),e.rXU(f.D),e.rXU(m.Ix),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-reset-password"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",1,"form-signin",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3","font-weight-normal"],[1,"from-floating","mb-3"],["formControlName","email","type","text","placeholder","Email",1,"form-control"],[1,"form-floating","mb-3"],["formControlName","newPassword","type","password","placeholder","Password",1,"form-control"],["for","newPassword"],["class","text-danger",4,"ngIf"],["class","form-floating",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"d-grid"],["type","submit",1,"btn","btn-block","btn-success"],["type","submit","routerLink","/account/login",1,"btn","btn-block","btn-danger"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(r,s){1&r&&e.DNE(0,te,24,5,"div",0),2&r&&e.Y8G("ngIf",s.token&&s.email)},dependencies:[g.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,m.Wk,_.J]})}}return i})();class ie{constructor(a,t,r,s,o){this.firstName=a,this.lastName=t,this.userId=r,this.accessToken=s,this.provider=o}}function se(i,a){1&i&&(e.j41(0,"span",16),e.EFF(1," first name required! "),e.k0s())}function ne(i,a){1&i&&(e.j41(0,"span",16),e.EFF(1," first name should be of 3 characters atleast "),e.k0s())}function oe(i,a){1&i&&(e.j41(0,"span",16),e.EFF(1," last name required! "),e.k0s())}function ae(i,a){1&i&&(e.j41(0,"span",16),e.EFF(1," last name should be of 3 character atleast "),e.k0s())}function le(i,a){if(1&i&&(e.j41(0,"div",17),e.nrm(1,"app-validation-messages",18),e.k0s()),2&i){const t=e.XpG(2);e.R7$(1),e.Y8G("errorMessages",t.errorMessages)}}function ce(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"main",3)(3,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.register())}),e.j41(4,"div",5),e.EFF(5," Creating an account using your "),e.j41(6,"span",6),e.EFF(7),e.nI1(8,"titlecase"),e.k0s()(),e.j41(9,"div",7),e.nrm(10,"input",8),e.j41(11,"label",9),e.EFF(12,"First Name"),e.k0s(),e.DNE(13,se,2,0,"span",10),e.DNE(14,ne,2,0,"span",10),e.k0s(),e.j41(15,"div",7),e.nrm(16,"input",11),e.j41(17,"label",12),e.EFF(18,"Last Name"),e.k0s(),e.DNE(19,oe,2,0,"span",10),e.DNE(20,ae,2,0,"span",10),e.k0s(),e.DNE(21,le,2,1,"div",13),e.j41(22,"div",14)(23,"button",15),e.EFF(24,"Create Account"),e.k0s()()()()()()}if(2&i){const t=e.XpG();let r,s,o,l,c,u;e.R7$(3),e.Y8G("formGroup",t.registrationForm),e.R7$(4),e.JRh(e.bMT(8,11,t.provider)),e.R7$(3),e.AVh("is-invalid",t.submitted&&(null==(r=t.registrationForm.get("firstName"))?null:r.errors)),e.R7$(3),e.Y8G("ngIf",t.submitted&&(null==(s=t.registrationForm.get("firstName"))?null:s.hasError("required"))),e.R7$(1),e.Y8G("ngIf",t.submitted&&(null==(o=t.registrationForm.get("firstName"))?null:o.hasError("minlength"))),e.R7$(2),e.AVh("is-invalid",t.submitted&&(null==(l=t.registrationForm.get("lastName"))?null:l.errors)),e.R7$(3),e.Y8G("ngIf",t.submitted&&(null==(c=t.registrationForm.get("lastName"))?null:c.hasError("required"))),e.R7$(1),e.Y8G("ngIf",t.submitted&&(null==(u=t.registrationForm.get("lastName"))?null:u.hasError("minlength"))),e.R7$(1),e.Y8G("ngIf",t.errorMessages.length>0)}}const me=[{path:"login",component:U},{path:"register",component:Y},{path:"confirm-email",component:q},{path:"send-email/:mode",component:H},{path:"reset-password",component:re},{path:"third-party/:provider",component:(()=>{class i{constructor(t,r,s,o){this.accountService=t,this.router=r,this.activatedRoute=s,this.formBuilder=o,this.registrationForm=new n.gE({}),this.submitted=!1,this.provider=null,this.access_token=null,this.userId=null,this.errorMessages=[]}ngOnInit(){this.accountService.user$.pipe((0,h.s)(1)).subscribe({next:t=>{t?this.router.navigateByUrl("/"):this.activatedRoute.queryParamMap.subscribe({next:r=>{this.provider=this.activatedRoute.snapshot.paramMap.get("provider"),this.access_token=r.get("access_token"),this.userId=r.get("userId"),this.provider&&this.access_token&&this.userId&&("facebook"===this.provider||"google"===this.provider)?this.initializeForm():this.router.navigateByUrl("/account/register")}})}})}register(){if(this.submitted=!0,this.errorMessages=[],this.registrationForm.valid&&this.userId&&this.access_token&&this.provider){const t=this.registrationForm.get("firstName")?.value,r=this.registrationForm.get("lastName")?.value,s=new ie(t,r,this.userId,this.access_token,this.provider);this.accountService.registerWithThirdParty(s).subscribe({next:o=>{this.router.navigateByUrl("/")},error:o=>{o.error.errors?this.errorMessages=o.error.errors:this.errorMessages.push(o.error)}})}}initializeForm(){this.registrationForm=this.formBuilder.group({firstName:["",[n.k0.required,n.k0.minLength(3),n.k0.maxLength(15)]],lastName:["",[n.k0.required,n.k0.minLength(3),n.k0.maxLength(15)]]})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(f.D),e.rXU(m.Ix),e.rXU(m.nX),e.rXU(n.ok))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-register-with-third-party"]],decls:1,vars:1,consts:[["class","d-flex justify-content-center",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-5"],[1,"form-signin"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"text-warning"],[1,"form-floating","mb-3"],["formControlName","firstName","type","text","placeholder","First Name",1,"form-control"],["for","firstName"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text","placeholder","Last Name",1,"form-control"],["for","lastName"],["class","form-floating",4,"ngIf"],[1,"d-grid","mt-4","px-1"],["type","submit",1,"btn","btn-lg","btn-info"],[1,"text-danger"],[1,"form-floating"],[3,"errorMessages"]],template:function(r,s){1&r&&e.DNE(0,ce,25,13,"div",0),2&r&&e.Y8G("ngIf",s.provider&&s.access_token&&s.userId)},dependencies:[g.bT,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,_.J,g.PV]})}}return i})()}];let ue=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[g.MD,m.iI.forChild(me)]})}}return i})();var j=d(1626),de=d(3887);let ge=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[g.MD,ue,n.X1,j.q1,de.G,m.iI,n.X1,j.q1]})}}return i})()}}]);